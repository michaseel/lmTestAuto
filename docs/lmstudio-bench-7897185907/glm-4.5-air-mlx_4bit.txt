
<think>Let's create a fully functional Kanban board in a single HTML file with vanilla JavaScript. Here are the requirements:

1. Four columns: Backlog, In Progress, Review, Done
2. Cards must be:
   - Draggable across columns
   - Editable in place
   - Persisted in localStorage (with a custom namespace)
   - Deletable with confirmation prompt
3. Each column has an "Add card" action
4. Style with Tailwind via CDN
5. Add CSS transitions and confetti animation when a card moves to "Done"
6. Thoroughly comment the code
7. Don't use window.alert or window.prompt for card operations
8. Create dummy cards if none exist initially
9. Modern and vibrant design

Let's structure the solution:

1. HTML Structure:
   - Container for the Kanban board
   - Four columns, each with a title and card container
   - Each column will have an "Add Card" button
   - Modal/dialog for editing and deleting cards

2. CSS:
   - Use Tailwind via CDN
   - Add custom transitions for dragging and other animations
   - Styling for the drag-and-drop states

3. JavaScript:
   - Kanban class to manage state and operations
   - Card management functions (create, edit, delete, move)
   - Drag-and-drop functionality
   - LocalStorage persistence
   - Confetti animation for completed tasks
   - Modal/dialog implementation without using window.alert or prompt

4. Dummy Data:
   - If no cards exist in localStorage, create some initial dummy cards

Let's start coding:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban Board</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom styles -->
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Dragging styles */
        .dragging {
            opacity: 0.5;
            cursor: grabbing !important;
        }
        
        .drag-over {
            background-color: rgba(99, 102, 241, 0.1);
        }
        
        /* Card transition */
        .card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        /* Confetti styles */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 9999;
        }
        
        /* Modal backdrop */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm py-4 px-6 mb-8">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-bold text-indigo-600">Kanban Board</h1>
            <div class="text-sm text-gray-500">
                Drag cards between columns to update status
            </div>
        </div>
    </header>

    <!-- Main Kanban Board -->
    <main class="container mx-auto px-4">
        <div id="kanban-board" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Columns will be dynamically generated here -->
        </div>
    </main>

    <!-- Modal for Add/Edit Card -->
    <div id="card-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
        <div class="modal-backdrop absolute inset-0" onclick="closeCardModal()"></div>
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md z-10 relative">
            <h2 id="modal-title" class="text-xl font-bold mb-4 text-gray-800">Add New Card</h2>
            <form id="card-form">
                <input type="hidden" id="card-id">
                
                <!-- Title Input -->
                <div class="mb-4">
                    <label for="card-title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                    <input type="text" id="card-title" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                </div>
                
                <!-- Description Input -->
                <div class="mb-6">
                    <label for="card-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea id="card-description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                </div>
                
                <!-- Actions -->
                <div class="flex justify-end space-x-3">
                    <button type="button" onclick="closeCardModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        Cancel
                    </button>
                    
                    <div id="delete-container" class="hidden">
                        <button type="button" onclick="deleteCard()" class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
                            Delete
                        </button>
                    </div>
                    
                    <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div id="confirmation-dialog" class="fixed inset-0 flex items-center justify-center z-50 hidden">
        <div class="modal-backdrop absolute inset-0" onclick="closeConfirmationDialog()"></div>
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md z-10 relative">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Confirm Delete</h3>
            <p class="text-sm text-gray-500 mb-6">Are you sure you want to delete this card? This action cannot be undone.</p>
            <div class="flex justify-end space-x-3">
                <button onclick="closeConfirmationDialog()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    Cancel
                </button>
                <button onclick="confirmDelete()" class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
                    Delete
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let kanban = null;
        let cardToDeleteId = null;

        // Column configuration
        const columns = [
            { id: 'backlog', title: 'Backlog', color: 'bg-gray-500' },
            { id: 'in-progress', title: 'In Progress', color: 'bg-blue-500' },
            { id: 'review', title: 'Review', color: 'bg-yellow-500' },
            { id: 'done', title: 'Done', color: 'bg-green-500' }
        ];

        // Kanban class to manage state and operations
        class KanbanBoard {
            constructor() {
                // Initialize with empty board or load from localStorage
                this.cards = this.loadFromLocalStorage();
                
                // If no cards exist, create dummy data
                if (this.cards.length === 0) {
                    this.createDummyCards();
                }
                
                // Render the board
                this.renderBoard();
            }
            
            // Load cards from localStorage
            loadFromLocalStorage() {
                const storedCards = localStorage.getItem('kanban-board-app');
                return storedCards ? JSON.parse(storedCards) : [];
            }
            
            // Save cards to localStorage
            saveToLocalStorage() {
                localStorage.setItem('kanban-board-app', JSON.stringify(this.cards));
            }
            
            // Create dummy cards for initial state
            createDummyCards() {
                const dummyCards = [
                    { id: '1', title: 'Design Homepage', description: 'Create wireframes and mockups for the homepage layout.', columnId: 'backlog' },
                    { id: '2', title: 'Implement Authentication', description: 'Set up user authentication with login and registration.', columnId: 'backlog' },
                    { id: '3', title: 'API Integration', description: 'Connect frontend to backend REST API endpoints.', columnId: 'in-progress' },
                    { id: '4', title: 'Database Schema', description: 'Design and implement database schema for user data.', columnId: 'in-progress' },
                    { id: '5', title: 'Code Review', description: 'Review pull request #42 for dashboard feature.', columnId: 'review' },
                    { id: '6', title: 'Bug Fixes', description: 'Fix responsive layout issues on mobile devices.', columnId: 'review' },
                    { id: '7', title: 'User Testing', description: 'Conduct usability tests with focus group participants.', columnId: 'done' },
                    { id: '8', title: 'Documentation', description: 'Write comprehensive API documentation for new endpoints.', columnId: 'done' }
                ];
                
                this.cards = dummyCards;
                this.saveToLocalStorage();
            }
            
            // Render the entire board
            renderBoard() {
                const boardElement = document.getElementById('kanban-board');
                boardElement.innerHTML = '';
                
                // Create each column
                columns.forEach(column => {
                    const columnElement = this.createColumn(column);
                    boardElement.appendChild(columnElement);
                });
            }
            
            // Create a column element
            createColumn(columnConfig) {
                const colDiv = document.createElement('div');
                colDiv.className = 'bg-white rounded-lg shadow-md p-4 flex flex-col';
                
                // Column header
                const headerDiv = document.createElement('div');
                headerDiv.className = 'flex justify-between items-center mb-4';
                
                const titleDiv = document.createElement('h2');
                titleDiv.className = `text-lg font-semibold text-white ${columnConfig.color} px-3 py-1 rounded-full`;
                titleDiv.textContent = columnConfig.title;
                
                const countBadge = document.createElement('span');
                countBadge.className = 'bg-gray-200 text-gray-700 text-xs font-medium px-2 py-1 rounded-full';
                countBadge.textContent = this.getCardCount(columnConfig.id);
                
                headerDiv.appendChild(titleDiv);
                headerDiv.appendChild(countBadge);
                
                // Add card button
                const addButton = document.createElement('button');
                addButton.className = 'mt-2 text-sm bg-indigo-100 text-indigo-700 hover:bg-indigo-200 px-3 py-1 rounded-md transition-colors';
                addButton.textContent = '+ Add Card';
                addButton.onclick = () => this.showCardModal(columnConfig.id);
                
                // Column content area
                const contentDiv = document.createElement('div');
                contentDiv.className = 'flex-grow overflow-y-auto max-h-[calc(100vh-200px)]';
                contentDiv.id = `column-${columnConfig.id}`;
                
                // Add drag and drop listeners
                contentDiv.ondragover = (e) => this.handleDragOver(e);
                contentDiv.ondrop = (e) => this.handleDrop(e, columnConfig.id);
                
                // Append elements
                colDiv.appendChild(headerDiv);
                colDiv.appendChild(contentDiv);
                colDiv.appendChild(addButton);
                
                // Add cards to this column
                const cardsInColumn = this.cards.filter(card => card.columnId === columnConfig.id);
                cardsInColumn.forEach(card => {
                    const cardElement = this.createCardElement(card);
                    contentDiv.appendChild(cardElement);
                });
                
                return colDiv;
            }
            
            // Create a card element
            createCardElement(card) {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'card bg-white border-l-4 border-indigo-500 rounded-md shadow-sm p-3 mb-2 cursor-grab';
                cardDiv.draggable = true;
                cardDiv.id = `card-${card.id}`;
                
                // Card title
                const titleDiv = document.createElement('div');
                titleDiv.className = 'font-medium text-gray-800 mb-1';
                titleDiv.textContent = card.title;
                
                // Card description
                const descDiv = document.createElement('div');
                descDiv.className = 'text-sm text-gray-600';
                descDiv.textContent = card.description;
                
                // Card actions
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'flex justify-end mt-2';
                
                const editButton = document.createElement('button');
                editButton.className = 'text-xs text-indigo-600 hover:text-indigo-800';
                editButton.textContent = 'Edit';
                editButton.onclick = () => this.showCardModal(card.columnId, card);
                
                const deleteButton = document.createElement('button');
                deleteButton.className = 'text-xs text-red-600 hover:text-red-800 ml-2';
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = () => this.showConfirmationDialog(card.id);
                
                actionsDiv.appendChild(editButton);
                actionsDiv.appendChild(deleteButton);
                
                // Append elements
                cardDiv.appendChild(titleDiv);
                cardDiv.appendChild(descDiv);
                cardDiv.appendChild(actionsDiv);
                
                // Add drag event listeners
                cardDiv.ondragstart = (e) => this.handleDragStart(e, card.id);
                cardDiv.ondragend = (e) => this.handleDragEnd(e);
                
                return cardDiv;
            }
            
            // Get the number of cards in a column
            getCardCount(columnId) {
                return this.cards.filter(card => card.columnId === columnId).length;
            }
            
            // Drag and drop handlers
            handleDragStart(e, cardId) {
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('cardId', cardId);
                e.target.classList.add('dragging');
            }
            
            handleDragEnd(e) {
                e.target.classList.remove('dragging');
                
                // Remove all drag-over classes
                document.querySelectorAll('.drag-over').forEach(el => {
                    el.classList.remove('drag-over');
                });
            }
            
            handleDragOver(e) {
                if (e.preventDefault) {
                    e.preventDefault();
                }
                
                e.dataTransfer.dropEffect = 'move';
                
                // Add visual feedback
                const column = e.currentTarget;
                if (!column.classList.contains('drag-over')) {
                    column.classList.add('drag-over');
                }
                
                return false;
            }
            
            handleDrop(e, columnId) {
                if (e.stopPropagation) {
                    e.stopPropagation();
                }
                
                // Remove drag-over class
                e.currentTarget.classList.remove('drag-over');
                
                const cardId = e.dataTransfer.getData('cardId');
                this.moveCard(cardId, columnId);
                
                return false;
            }
            
            // Move a card to another column
            moveCard(cardId, newColumnId) {
                const cardIndex = this.cards.findIndex(card => card.id === cardId);
                
                if (cardIndex !== -1) {
                    // Update the card's column
                    this.cards[cardIndex].columnId = newColumnId;
                    
                    // Save to localStorage
                    this.saveToLocalStorage();
                    
                    // If moving to Done column, trigger confetti animation
                    if (newColumnId === 'done') {
                        this.triggerConfetti();
                    }
                    
                    // Re-render the board
                    this.renderBoard();
                }
            }
            
            // Show card modal for adding/editing a card
            showCardModal(columnId, card = null) {
                const modal = document.getElementById('card-modal');
                const titleInput = document.getElementById('card-title');
                const descInput = document.getElementById('card-description');
                const cardIdInput = document.getElementById('card-id');
                const modalTitle = document.getElementById('modal-title');
                const deleteContainer = document.getElementById('delete-container');
                
                // Reset form
                titleInput.value = '';
                descInput.value = '';
                cardIdInput.value = '';
                
                // Set title based on action
                if (card) {
                    modalTitle.textContent = 'Edit Card';
                    titleInput.value = card.title;
                    descInput.value = card.description;
                    cardIdInput.value = card.id;
                    
                    // Show delete button for existing cards
                    deleteContainer.classList.remove('hidden');
                } else {
                    modalTitle.textContent = 'Add New Card';
                    
                    // Hide delete button for new cards
                    deleteContainer.classList.add('hidden');
                }
                
                // Set the column ID for new cards
                if (!card) {
                    cardIdInput.value = 'new-' + Date.now();
                    // Store the column ID temporarily for new cards
                    modal.dataset.columnId = columnId;
                }
                
                // Show the modal
                modal.classList.remove('hidden');
            }
            
            // Close card modal
            closeCardModal() {
                document.getElementById('card-modal').classList.add('hidden');
            }
            
            // Save card (add or edit)
            saveCard(cardData) {
                const cardId = cardData.id;
                
                if (cardId.startsWith('new-')) {
                    // New card
                    const newCard = {
                        id: cardId,
                        title: cardData.title,
                        description: cardData.description,
                        columnId: document.getElementById('card-modal').dataset.columnId
                    };
                    
                    this.cards.push(newCard);
                } else {
                    // Existing card
                    const cardIndex = this.cards.findIndex(card => card.id === cardId);
                    
                    if (cardIndex !== -1) {
                        this.cards[cardIndex].title = cardData.title;
                        this.cards[cardIndex].description = cardData.description;
                    }
                }
                
                // Save to localStorage
                this.saveToLocalStorage();
                
                // Re-render the board
                this.renderBoard();
                
                // Close modal
                this.closeCardModal();
            }
            
            // Show confirmation dialog for delete action
            showConfirmationDialog(cardId) {
                cardToDeleteId = cardId;
                
                const dialog = document.getElementById('confirmation-dialog');
                dialog.classList.remove('hidden');
            }
            
            // Close confirmation dialog
            closeConfirmationDialog() {
                document.getElementById('confirmation-dialog').classList.add('hidden');
                cardToDeleteId = null;
            }
            
            // Delete a card
            deleteCard() {
                if (!cardToDeleteId) return;
                
                // Remove the card
                this.cards = this.cards.filter(card => card.id !== cardToDeleteId);
                
                // Save to localStorage
                this.saveToLocalStorage();
                
                // Re-render the board
                this.renderBoard();
                
                // Close dialogs
                this.closeConfirmationDialog();
            }
            
            // Trigger confetti animation when a card is moved to Done
            triggerConfetti() {
                const colors = ['#FF5252', '#FFD740', '#64FFDA', '#448AFF', '#E040FB'];
                const confettiCount = 100;
                
                for (let i = 0; i < confettiCount; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        
                        // Random position
                        const xPos = Math.random() * window.innerWidth;
                        const yPos = -10; // Start above the viewport
                        
                        confetti.style.left = `${xPos}px`;
                        confetti.style.top = `${yPos}px`;
                        
                        // Random color
                        const colorIndex = Math.floor(Math.random() * colors.length);
                        confetti.style.backgroundColor = colors[colorIndex];
                        
                        // Random shape (circle or square)
                        const isCircle = Math.random() > 0.5;
                        if (isCircle) {
                            confetti.style.borderRadius = '50%';
                        }
                        
                        document.body.appendChild(confetti);
                        
                        // Animation
                        const duration = 2000 + Math.random() * 1000;
                        const endY = window.innerHeight + 10;
                        
                        confetti.animate(
                            [
                                { transform: `translateY(0) rotate(0deg)` },
                                { transform: `translateY(${endY}px) rotate(${Math.random() * 720}deg)` }
                            ],
                            {
                                duration: duration,
                                easing: 'cubic-bezier(0, .9, .57, 1)',
                                fill: 'forwards'
                            }
                        );
                        
                        // Remove after animation
                        setTimeout(() => {
                            confetti.remove();
                        }, duration);
                    }, i * 15); // Stagger the animation
                }
            }
        }

        // Initialize Kanban board when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            kanban = new KanbanBoard();
            
            // Handle card form submission
            document.getElementById('card-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const cardData = {
                    id: document.getElementById('card-id').value,
                    title: document.getElementById('card-title').value,
                    description: document.getElementById('card-description').value
                };
                
                kanban.saveCard(cardData);
            });
        });

        // Global functions for modals and confirmation dialog
        function closeCardModal() {
            kanban.closeCardModal();
        }
        
        function deleteCard() {
            kanban.deleteCard();
        }
        
        function confirmDelete() {
            if (kanban) {
                kanban.deleteCard();
            }
        }
        
        function closeConfirmationDialog() {
            if (kanban) {
                kanban.closeConfirmationDialog();
            }
        }

        // Add touch event support for mobile devices
        document.addEventListener('touchstart', (e) => {
            const card = e.target.closest('.card');
            if (card && card.draggable) {
                // Store the touch position
                const touch = e.touches[0];
                card.dataset.touchX = touch.clientX;
                card.dataset.touchY = touch.clientY;
            }
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            const card = e.target.closest('.card');
            if (card && card.draggable) {
                // Prevent default to allow scrolling
                e.preventDefault();
                
                const touch = e.touches[0];
                const deltaX = touch.clientX - parseFloat(card.dataset.touchX);
                const deltaY = touch.clientY - parseFloat(card.dataset.touchY);
                
                // Move the card
                card.style.position = 'fixed';
                card.style.zIndex = '1000';
                card.style.left = `${touch.clientX - 50}px`; // Center on touch
                card.style.top = `${touch.clientY - 25}px`;
                
                // Find the column to highlight
                const columns = document.querySelectorAll('[id^="column-"]');
                for (const col of columns) {
                    const rect = col.getBoundingClientRect();
                    
                    if (
                        touch.clientX >= rect.left &&
                        touch.clientX <= rect.right &&
                        touch.clientY >= rect.top &&
                        touch.clientY <= rect.bottom
                    ) {
                        col.classList.add('drag-over');
                    } else {
                        col.classList.remove('drag-over');
                    }
                }
            }
        }, { passive: false });

        document.addEventListener('touchend', (e) => {
            const card = e.target.closest('.card');
            if (card && card.draggable) {
                // Reset styles
                card.style.position = '';
                card.style.zIndex = '';
                card.style.left = '';
                card.style.top = '';
                
                // Find the column with drag-over class
                const draggedOverColumn = document.querySelector('.drag-over');
                
                if (draggedOverColumn) {
                    // Extract column ID
                    const columnIndex = draggedOverColumn.id.replace('column-', '');
                    
                    // Get card ID from the element
                    const cardId = card.id.replace('card-', '');
                    
                    // Move the card to the new column
                    kanban.moveCard(cardId, columnIndex);
                }
                
                // Clean up
                document.querySelectorAll('.drag-over').forEach(el => {
                    el.classList.remove('drag-over');
                });
            }
        }, { passive: true });
    </script>
</body>
</html>